
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://e-racingbergamo.github.io/documentation/firmware_architecture/driver_hal/adc/">
      
      
        <link rel="prev" href="../../centralina/">
      
      
        <link rel="next" href="../../../control_modules/vehicle_dinamics/traction_control/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/simbolo_blu.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>ADC Config - E-Racing bergamo docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adc-analog-to-digital-converter" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="E-Racing bergamo docs" class="md-header__button md-logo" aria-label="E-Racing bergamo docs" data-md-component="logo">
      
  <img src="../../../assets/images/simbolo_blu.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            E-Racing bergamo docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADC Config
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Passa al tema scuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Passa al tema scuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Passa al tema chiaro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Passa al tema chiaro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="E-Racing bergamo docs" class="md-nav__button md-logo" aria-label="E-Racing bergamo docs" data-md-component="logo">
      
  <img src="../../../assets/images/simbolo_blu.ico" alt="logo">

    </a>
    E-Racing bergamo docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Academy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Academy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Fondamenti di C
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Fondamenti di C
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/fondamenti_di_c/sintassi_base_c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sintassi di base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/fondamenti_di_c/stdint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tipi e Standard int
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/fondamenti_di_c/visibilit%C3%A0_delle_variabili/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visibilità variabili
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/fondamenti_di_c/funzioni/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funzioni
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/fondamenti_di_c/strutture_controllo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Strutture di controllo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Memoria e Puntatori
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Memoria e Puntatori
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/memoria_puntatori/puntatori/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Puntatori
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/memoria_puntatori/strutture_base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Strutture dati base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Strutture Dati Avanzate
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Strutture Dati Avanzate
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/strutture_dati/strutture_dinamiche/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Strutture dinamiche
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/strutture_dati/linked_list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linked list
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../academy/strutture_dati/binary_tree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Binary tree
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Firmware Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Firmware Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../centralina/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Panoramica Centralina
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Driver & HAL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Driver & HAL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    ADC Config
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    ADC Config
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#il-campionamento-e-il-circuito-di-sample-and-hold-sh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Il Campionamento e il Circuito di Sample and Hold (S/H)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Il Campionamento e il Circuito di Sample and Hold (S/H)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teoria-il-teorema-di-nyquist-shannon" class="md-nav__link">
    <span class="md-ellipsis">
      
        Teoria: Il Teorema di Nyquist-Shannon
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-il-circuito-di-sample-and-hold-sh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware: Il Circuito di Sample and Hold (S/H)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-quantizzazione-e-lerrore-di-quantizzazione" class="md-nav__link">
    <span class="md-ellipsis">
      
        La Quantizzazione e l'Errore di Quantizzazione
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="La Quantizzazione e l&#39;Errore di Quantizzazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-il-riferimento-di-tensione-v_ref" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware: Il Riferimento di Tensione (\(V_{ref}\))
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teoria-lerrore-di-quantizzazione" class="md-nav__link">
    <span class="md-ellipsis">
      
        Teoria: L'Errore di Quantizzazione
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#il-ciclo-di-conversione-e-i-tempi-operativi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Il Ciclo di Conversione e i Tempi Operativi
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc-sulla-centralina-fae" class="md-nav__link">
    <span class="md-ellipsis">
      
        ADC sulla centralina FAE
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ADC sulla centralina FAE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-stadio-di-ingresso-e-conversione-correntetensione-iv" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Stadio di Ingresso e Conversione Corrente/Tensione (I/V)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-stadio-di-protezione-clamping" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Stadio di Protezione (Clamping)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-stadio-di-filtraggio-anti-aliasing-passa-basso" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Stadio di Filtraggio Anti-Aliasing (Passa-Basso)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-stadio-di-buffering-inseguitore-di-tensione" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Stadio di Buffering (Inseguitore di Tensione)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-stadio-di-uscita-e-serbatoio-di-carica" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Stadio di Uscita e Serbatoio di Carica
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Moduli di Controllo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Moduli di Controllo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Vehicle Dynamics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Vehicle Dynamics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../control_modules/vehicle_dinamics/traction_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Traction Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Powertrain
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Powertrain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../control_modules/powertrain/gestione_termica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gestione Termica Inverter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Battery Management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Battery Management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../control_modules/battery_soc/SOC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State Of Charge (SOC)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#il-campionamento-e-il-circuito-di-sample-and-hold-sh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Il Campionamento e il Circuito di Sample and Hold (S/H)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Il Campionamento e il Circuito di Sample and Hold (S/H)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teoria-il-teorema-di-nyquist-shannon" class="md-nav__link">
    <span class="md-ellipsis">
      
        Teoria: Il Teorema di Nyquist-Shannon
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-il-circuito-di-sample-and-hold-sh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware: Il Circuito di Sample and Hold (S/H)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-quantizzazione-e-lerrore-di-quantizzazione" class="md-nav__link">
    <span class="md-ellipsis">
      
        La Quantizzazione e l'Errore di Quantizzazione
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="La Quantizzazione e l&#39;Errore di Quantizzazione">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-il-riferimento-di-tensione-v_ref" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hardware: Il Riferimento di Tensione (\(V_{ref}\))
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teoria-lerrore-di-quantizzazione" class="md-nav__link">
    <span class="md-ellipsis">
      
        Teoria: L'Errore di Quantizzazione
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#il-ciclo-di-conversione-e-i-tempi-operativi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Il Ciclo di Conversione e i Tempi Operativi
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adc-sulla-centralina-fae" class="md-nav__link">
    <span class="md-ellipsis">
      
        ADC sulla centralina FAE
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ADC sulla centralina FAE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-stadio-di-ingresso-e-conversione-correntetensione-iv" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Stadio di Ingresso e Conversione Corrente/Tensione (I/V)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-stadio-di-protezione-clamping" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Stadio di Protezione (Clamping)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-stadio-di-filtraggio-anti-aliasing-passa-basso" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Stadio di Filtraggio Anti-Aliasing (Passa-Basso)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-stadio-di-buffering-inseguitore-di-tensione" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Stadio di Buffering (Inseguitore di Tensione)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-stadio-di-uscita-e-serbatoio-di-carica" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Stadio di Uscita e Serbatoio di Carica
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="adc-analog-to-digital-converter">ADC (Analog to Digital Converter)</h1>
<p>Un convertitore analogico-digitale (ADC) è un dispositivo elettronico la cui funzione è trasformare un segnale analogico, continuo nel tempo e nell'ampiezza, in un segnale digitale, discreto sia nel tempo che nell'ampiezza. Questo processo di "traduzione" è fondamentale per l'interfacciamento tra i sensori del mondo reale e i sistemi di elaborazione numerica (come microcontrollori o computer).</p>
<p>L'intero processo si fonda su due operazioni concettuali distinte e sequenziali: il <strong>campionamento</strong> (discretizzazione nel tempo) e la <strong>quantizzazione</strong> (discretizzazione nell'ampiezza). Queste operazioni teoriche sono implementate da specifiche architetture hardware.</p>
<h3 id="il-campionamento-e-il-circuito-di-sample-and-hold-sh">Il Campionamento e il Circuito di Sample and Hold (S/H)</h3>
<p>Il primo passo è la discretizzazione temporale. Un segnale analogico <span class="arithmatex">\(v_{in}(t)\)</span> ha un valore definito per ogni istante di tempo <span class="arithmatex">\(t\)</span>. Un sistema digitale non può acquisire un'infinità di valori in un dato intervallo; deve "fotografare" il segnale a intervalli di tempo specifici. Questo processo è il <strong>campionamento</strong>.</p>
<h4 id="teoria-il-teorema-di-nyquist-shannon">Teoria: Il Teorema di Nyquist-Shannon</h4>
<p>La teoria fondamentale del campionamento stabilisce che, per poter ricostruire fedelmente un segnale analogico a partire dai suoi campioni, la frequenza di campionamento <span class="arithmatex">\(f_s\)</span> deve essere rigorosamente maggiore del doppio della massima frequenza contenuta nel segnale stesso, <span class="arithmatex">\(f_{max}\)</span>.</p>
<div class="arithmatex">\[f_s &gt; 2 \cdot f_{max}\]</div>
<p>Questa condizione è nota come <strong>criterio di Nyquist</strong>. Se il criterio non è rispettato, si verifica un fenomeno distorsivo chiamato <strong>aliasing</strong>, in cui le componenti spettrali del segnale a frequenze superiori a <span class="arithmatex">\(f_s/2\)</span> (la frequenza di Nyquist) si "ripiegano" nella banda di interesse, apparendo come segnali a frequenza più bassa e corrompendo irrimediabilmente l'informazione. Per questo motivo, un ADC è quasi sempre preceduto da un <strong>filtro anti-aliasing</strong>, un filtro passa-basso analogico che elimina le componenti spettrali oltre <span class="arithmatex">\(f_{max}\)</span> prima che il segnale raggiunga il campionatore.</p>
<h4 id="hardware-il-circuito-di-sample-and-hold-sh">Hardware: Il Circuito di Sample and Hold (S/H)</h4>
<p>A livello hardware, il campionamento non è un'operazione istantanea. Il processo di quantizzazione richiede un certo tempo per essere completato, e durante questo tempo il segnale d'ingresso non deve variare. Se il segnale variasse durante la quantizzazione, il risultato digitale sarebbe indefinito e affetto da errore.</p>
<p>Per risolvere questo problema, si utilizza un circuito fondamentale chiamato <strong>Sample and Hold (S/H)</strong>, o talvolta <em>Track and Hold</em>.</p>
<p>Questo circuito è concettualmente semplice:</p>
<ol>
<li>Un <strong>interruttore analogico</strong> (tipicamente un MOSFET).</li>
<li>Un <strong>condensatore di hold</strong> (o di campionamento), <span class="arithmatex">\(C_H\)</span>.</li>
<li>Un <strong>buffer</strong> (amplificatore operazionale in configurazione <em>voltage follower</em>) per isolare il condensatore dal resto del circuito.</li>
</ol>
<p>Il suo funzionamento avviene in due fasi:</p>
<ul>
<li>
<p><strong>Fase di Sample (o Track):</strong> L'interruttore è chiuso. Il condensatore <span class="arithmatex">\(C_H\)</span> si carica (o scarica) per seguire la tensione di ingresso <span class="arithmatex">\(v_{in}(t)\)</span>. Il tempo necessario affinché la tensione ai capi del condensatore, <span class="arithmatex">\(v_C\)</span>, raggiunga un valore sufficientemente prossimo a <span class="arithmatex">\(v_{in}\)</span> (entro una frazione di LSB) è chiamato <strong>Tempo di Acquisizione</strong> (<span class="arithmatex">\(t_{acq}\)</span>). Questo tempo dipende dalla resistenza dell'interruttore (<span class="arithmatex">\(R_{on}\)</span>) e dalla capacità <span class="arithmatex">\(C_H\)</span> (costante di tempo <span class="arithmatex">\(\tau = R_{on} \cdot C_H\)</span>).</p>
</li>
<li>
<p><strong>Fase di Hold:</strong> L'interruttore viene aperto istantaneamente (in teoria). La carica accumulata su <span class="arithmatex">\(C_H\)</span> non ha più un percorso a bassa impedenza per scaricarsi. Il condensatore "mantiene" quindi la tensione <span class="arithmatex">\(v_C\)</span> costante al valore che <span class="arithmatex">\(v_{in}(t)\)</span> aveva nell'istante esatto dell'apertura. Questa tensione stabile è ora disponibile per il blocco di quantizzazione.</p>
</li>
</ul>
<p>Nella realtà, l'apertura non è istantanea. Il breve intervallo in cui l'interruttore passa da chiuso ad aperto è il <strong>tempo di apertura</strong> (<em>aperture time</em>). L'incertezza statistica su <em>quando</em> esattamente avviene questa transizione è il <strong>jitter di apertura</strong>, una fonte critica di rumore e errore nelle conversioni ad alta frequenza. Durante la fase di Hold, inoltre, la tensione non rimane perfettamente costante a causa di correnti di perdita (correnti di <em>leakage</em> dell'interruttore e correnti di <em>bias</em> del buffer), provocando un leggero decadimento della tensione (<em>droop rate</em>).</p>
<h3 id="la-quantizzazione-e-lerrore-di-quantizzazione">La Quantizzazione e l'Errore di Quantizzazione</h3>
<p>Una volta che il circuito S/H ha "congelato" un valore di tensione analogica <span class="arithmatex">\(v_C\)</span>, inizia il secondo processo: la <strong>quantizzazione</strong>. Questa è la discretizzazione dell'ampiezza.
La quantizzazione consiste nell'associare il valore analogico <span class="arithmatex">\(v_C\)</span> (che appartiene a un intervallo continuo) a uno tra un numero finito di livelli digitali. Il numero di questi livelli è determinato dalla <strong>risoluzione</strong> dell'ADC, espressa in bit (<span class="arithmatex">\(N\)</span>).</p>
<p>Un ADC a <span class="arithmatex">\(N\)</span> bit può produrre <span class="arithmatex">\(2^N\)</span> codici digitali distinti. Ad esempio, un ADC a 8 bit ha <span class="arithmatex">\(2^8 = 256\)</span> livelli; un ADC a 12 bit ne ha <span class="arithmatex">\(2^{12} = 4096\)</span>.</p>
<h4 id="hardware-il-riferimento-di-tensione-v_ref">Hardware: Il Riferimento di Tensione (<span class="arithmatex">\(V_{ref}\)</span>)</h4>
<p>L'hardware che definisce l'intervallo di tensioni che l'ADC può misurare è il <strong>riferimento di tensione</strong> (<span class="arithmatex">\(V_{ref}\)</span>). Questo è uno dei componenti più critici per l'accuratezza dell'ADC. L'ADC mappa l'intervallo di tensioni d'ingresso, definito come <span class="arithmatex">\(V_{FS}\)</span> (<em>Full-Scale Range</em>), che solitamente va da una <span class="arithmatex">\(V_{ref-}\)</span> (spesso 0V, o GND) a una <span class="arithmatex">\(V_{ref+}\)</span> (spesso <span class="arithmatex">\(V_{ref}\)</span> stessa), sull'intero insieme dei <span class="arithmatex">\(2^N\)</span> codici digitali.</p>
<p>L'ampiezza di un singolo livello discreto, ovvero la minima variazione di tensione che l'ADC è teoricamente in grado di distinguere, è chiamata <strong>quantum</strong> o <strong>LSB</strong> (Least Significant Bit). Il suo valore è:</p>
<div class="arithmatex">\[q = \text{LSB} = \frac{V_{FS}}{2^N} = \frac{V_{ref+} - V_{ref-}}{2^N}\]</div>
<p>Ad esempio, un ADC a 10 bit (<span class="arithmatex">\(2^{10} = 1024\)</span> livelli) con un riferimento <span class="arithmatex">\(V_{ref} = 5.0\text{V}\)</span> (e <span class="arithmatex">\(V_{ref-} = 0\text{V}\)</span>) avrà un LSB di <span class="arithmatex">\(q = \frac{5.0\text{V}}{1024} \approx 4.88\text{mV}\)</span>.</p>
<h4 id="teoria-lerrore-di-quantizzazione">Teoria: L'Errore di Quantizzazione</h4>
<p>Il processo di quantizzazione è intrinsecamente un'approssimazione. Qualsiasi tensione analogica <span class="arithmatex">\(v_C\)</span> che cade tra due livelli di decisione <span class="arithmatex">\(V_k\)</span> e <span class="arithmatex">\(V_{k+1}\)</span> viene mappata a un singolo codice digitale (ad esempio, il codice <span class="arithmatex">\(k\)</span>).</p>
<p>Questa differenza tra il valore analogico reale campionato <span class="arithmatex">\(v_C\)</span> e il valore digitale <span class="arithmatex">\(V_{digitale}\)</span> che lo rappresenta è un errore ineluttabile chiamato <strong>errore di quantizzazione</strong> (<span class="arithmatex">\(e_q\)</span>).</p>
<div class="arithmatex">\[e_q = v_C - V_{digitale}\]</div>
<p>Nel caso ideale, il circuito di quantizzazione assegna al campione analogico il codice digitale più vicino. In questa situazione, l'errore di quantizzazione è sempre limitato a metà del gradino minimo.</p>
<div class="arithmatex">\[|e_q| \leq \frac{q}{2} \text{ (ovvero } \pm \frac{1}{2} \text{LSB)}\]</div>
<p>Questo errore è inevitabile e viene spesso modellato come una fonte di rumore (il <strong>rumore di quantizzazione</strong>), la cui potenza è direttamente legata alla risoluzione <span class="arithmatex">\(N\)</span>. Aumentare la risoluzione (più bit) riduce il <span class="arithmatex">\(q\)</span> e, di conseguenza, riduce il rumore di quantizzazione, aumentando il <strong>rapporto segnale/rumore</strong> (SNR) dell'ADC.</p>
<h3 id="il-ciclo-di-conversione-e-i-tempi-operativi">Il Ciclo di Conversione e i Tempi Operativi</h3>
<p>L'intero processo non è istantaneo. L'operazione completa di un ADC si svolge in un ciclo che somma i tempi delle fasi viste finora.</p>
<p>Il tempo totale per ottenere un singolo campione digitale è il <strong>tempo di ciclo</strong> (<span class="arithmatex">\(T_{cycle}\)</span>), dato dalla somma del tempo di acquisizione e del tempo di conversione:</p>
<div class="arithmatex">\[T_{cycle} = t_{acq} + t_{conv}\]</div>
<ol>
<li>
<p><strong>Tempo di Acquisizione (<span class="arithmatex">\(t_{acq}\)</span>):</strong> È il tempo, discusso prima, in cui il circuito S/H è in fase "Sample" e il condensatore <span class="arithmatex">\(C_H\)</span> si carica alla tensione di ingresso.</p>
</li>
<li>
<p><strong>Tempo di Conversione (<span class="arithmatex">\(t_{conv}\)</span>):</strong> È il tempo richiesto dall'hardware <em>interno</em> dell'ADC (che può essere un'architettura SAR, Flash, Delta-Sigma, ecc.) per eseguire l'algoritmo di quantizzazione e codifica. È il tempo che intercorre tra il comando di "Hold" e l'istante in cui il dato digitale <span class="arithmatex">\(N\)</span>-bit è valido e stabile sull'uscita.</p>
</li>
</ol>
<p>La massima frequenza di campionamento <span class="arithmatex">\(f_s\)</span> che l'ADC può sostenere è l'inverso del tempo di ciclo totale:</p>
<div class="arithmatex">\[f_s = \frac{1}{T_{cycle}} = \frac{1}{t_{acq} + t_{conv}}\]</div>
<p>Questi parametri (<span class="arithmatex">\(t_{acq}\)</span> e <span class="arithmatex">\(t_{conv}\)</span>) sono fondamentali nei datasheet di un ADC e determinano il <em>throughput</em> (la velocità) massimo del convertitore. Per esempio, un ADC "pipeline" può iniziare l'acquisizione di un nuovo campione <em>mentre</em> sta ancora convertendo quello precedente, ottimizzando la velocità complessiva e disaccoppiando <span class="arithmatex">\(f_s\)</span> dalla somma semplice dei due tempi. Tuttavia, per le architetture più comuni come il SAR (Successive Approximation Register), questo ciclo <span class="arithmatex">\(t_{acq} + t_{conv}\)</span> definisce rigidamente la massima velocità operativa.</p>
<h2 id="adc-sulla-centralina-fae">ADC sulla centralina FAE</h2>
<p><img alt="Centralina fae" src="../adcfae.png" /></p>
<p>Nell'immagine in alto è descritto il <strong>circuito di condizionamento del segnale</strong> che si trova <em>prima</em> dell'ADC nella centralina FAE che al momento utilizziamo.</p>
<p>Il suo compito è prendere un segnale industriale "grezzo" (come un 0-5V o un 4-20mA), proteggere l'elettronica, filtrarlo e adattarlo affinché possa essere letto correttamente e in sicurezza da un pin di ingresso dell'ADC (presumibilmente un microcontrollore).</p>
<p>Analizziamo il percorso del segnale, passo dopo passo, per un singolo canale (ad esempio, quello di sinistra, che è identico a quello di destra).</p>
<hr />
<h3 id="1-stadio-di-ingresso-e-conversione-correntetensione-iv">1. Stadio di Ingresso e Conversione Corrente/Tensione (I/V)</h3>
<p>Il segnale entra dal connettore <strong>J38</strong>. Lo schema indica che questo ingresso accetta due tipi di segnali standard industriali: 0-5V (in tensione) o 4-20mA (in corrente).</p>
<ul>
<li><strong>R471 (200 <span class="arithmatex">\(\Omega\)</span>)</strong>: Questo è il componente chiave per l'ingresso in corrente. È un <strong>resistore di shunt</strong> (o <em>burden resistor</em>). Per la legge di Ohm (<span class="arithmatex">\(V = I \cdot R\)</span>), questo resistore converte la corrente che lo attraversa in una tensione.<ul>
<li>Se l'ingresso è <strong>4mA</strong> (minimo segnale): <span class="arithmatex">\(V = 0.004 \text{ A} \times 200 \text{ } \Omega = \mathbf{0.8 \text{ V}}\)</span></li>
<li>Se l'ingresso è <strong>20mA</strong> (massimo segnale): <span class="arithmatex">\(V = 0.020 \text{ A} \times 200 \text{ } \Omega = \mathbf{4.0 \text{ V}}\)</span></li>
</ul>
</li>
<li>Se l'ingresso è un segnale 0-5V, questo viene semplicemente applicato ai capi di questo resistore (e dei componenti a valle).</li>
</ul>
<p>Quindi, questo stadio unifica entrambi i tipi di segnale in un segnale di tensione.</p>
<h3 id="2-stadio-di-protezione-clamping">2. Stadio di Protezione (Clamping)</h3>
<p>Il segnale in tensione (che, come abbiamo visto, può arrivare fino a 4.0V o 5.0V) incontra subito il diodo <strong>D5 (BAT54SW)</strong>.</p>
<ul>
<li>Questo è un package contenente <strong>due diodi Schottky</strong> connessi in modo da realizzare un <strong>circuito di clamping</strong>.</li>
<li>Il catodo del diodo superiore è connesso all'alimentazione (<code>3V3_MAIN</code>, cioè 3.3 Volt).</li>
<li>L'anodo del diodo inferiore è connesso a massa (<code>GND_DIGITAL</code>).</li>
<li>Il segnale di ingresso è connesso al punto centrale.</li>
</ul>
<p><strong>Funzione:</strong> Questo circuito "blocca" (delimita) la tensione per proteggere i componenti successivi.</p>
<ul>
<li>
<p>Se la tensione di ingresso tenta di salire <em>sopra</em> i 3.3V, il diodo superiore entra in conduzione e "scarica" la tensione in eccesso verso l'alimentazione (limitando la tensione a circa <span class="arithmatex">\(3.3\text{V} + V_f \approx 3.6\text{V}\)</span>).</p>
</li>
<li>
<p>Se la tensione di ingresso tenta di scendere <em>sotto</em> lo 0V (ad esempio a causa di un disturbo negativo), il diodo inferiore entra in conduzione e la "ancora" a massa (limitandola a circa <span class="arithmatex">\(-V_f \approx -0.3\text{V}\)</span>).</p>
</li>
</ul>
<p><strong>Nota importante:</strong> Poiché l'alimentazione è a 3.3V, questo circuito <em>clippa</em> attivamente i segnali 4-20mA (che arrivano a 4.0V) e 0-5V. Ciò significa che l'intervallo di misura <em>effettivo</em> del circuito è limitato dalla tensione di alimentazione. Qualsiasi segnale che produce una tensione superiore a <span class="arithmatex">\(\approx 3.3\text{V}\)</span> verrà letto come "fondo scala" dall'ADC.</p>
<h3 id="3-stadio-di-filtraggio-anti-aliasing-passa-basso">3. Stadio di Filtraggio Anti-Aliasing (Passa-Basso)</h3>
<p>Il segnale, ora protetto, passa attraverso un <strong>filtro RC passa-basso</strong> passivo.
- <strong>R305 (<span class="arithmatex">\(10\text{k}\Omega\)</span>)</strong> e <strong>C231 (1nF)</strong> formano questo filtro.</p>
<p><strong>Funzione:</strong> Questo è il <strong>filtro anti-aliasing</strong> di cui abbiamo parlato nella teoria. Il suo compito è eliminare le componenti di rumore ad alta frequenza dal segnale <em>prima</em> che questo venga campionato dall'ADC. Questo previene l'errore di <em>aliasing</em>. La sua frequenza di taglio è:</p>
<div class="arithmatex">\[f_c = \frac{1}{2\pi \cdot R \cdot C} = \frac{1}{2\pi \cdot 10 \cdot 10^3 \text{ } \Omega \cdot 1 \cdot 10^{-9} \text{ F}} \approx 15.9 \text{ kHz}\]</div>
<p>Qualsiasi rumore o segnale spuria con frequenza superiore a <span class="arithmatex">\(\approx 16\text{kHz}\)</span> viene significativamente attenuato.</p>
<h3 id="4-stadio-di-buffering-inseguitore-di-tensione">4. Stadio di Buffering (Inseguitore di Tensione)</h3>
<p>Il segnale filtrato entra nel componente <strong>U30 (AD8542)</strong>. Questo è un amplificatore operazionale (in package doppio).</p>
<ul>
<li>Il segnale entra nell'ingresso non-invertente (pin 3, <code>+INA</code>).</li>
<li>L'uscita (pin 1, <code>OUTA</code>) è collegata direttamente all'ingresso invertente (pin 2, <code>-INA</code>).</li>
</ul>
<p>Questa configurazione è chiamata <strong>voltage follower</strong> (o <em>inseguitore di tensione</em>).</p>
<p><strong>Funzione:</strong> Questo stadio è fondamentale e svolge un doppio ruolo:</p>
<ol>
<li>
<p><strong>Adattamento di Impedenza:</strong> L'op-amp ha un'impedenza di ingresso altissima. Ciò significa che "guarda" il filtro RC (R305/C231) senza "caricarlo", ovvero senza assorbire corrente da esso, garantendo che il filtro funzioni come calcolato.</p>
</li>
<li>
<p><strong>ADC Driver:</strong> L'op-amp ha un'impedenza di uscita bassissima. Questo è cruciale. L'ingresso dell'ADC (che non vediamo, ma che è collegato a <code>ADC1_IN</code>) contiene il circuito di <strong>Sample and Hold (S/H)</strong>. Quando l'S/H commuta per "campionare", il suo condensatore interno (<span class="arithmatex">\(C_H\)</span>) deve caricarsi istantaneamente. L'op-amp, con la sua bassa impedenza di uscita, è in grado di fornire la "botta" di corrente necessaria per caricare <span class="arithmatex">\(C_H\)</span> rapidamente e senza far "cadere" la tensione del segnale.</p>
</li>
</ol>
<h3 id="5-stadio-di-uscita-e-serbatoio-di-carica">5. Stadio di Uscita e Serbatoio di Carica</h3>
<p>L'uscita dall'op-amp (pin 1) non va <em>direttamente</em> all'ADC, ma passa attraverso un ultimo piccolo filtro.
- <strong>R311 (<span class="arithmatex">\(10\Omega\)</span>)</strong> e <strong>C232 (1nF)</strong>.</p>
<p><strong>Funzione:</strong> Anche questo stadio ha un doppio ruolo critico per l'integrità del segnale:</p>
<ol>
<li>
<p><strong>R311 (Resistore di Isolamento):</strong> Gli op-amp possono diventare instabili (oscillare) se pilotano un carico puramente capacitivo, come l'ingresso di un ADC. Questo piccolo resistore da 10<span class="arithmatex">\(\Omega\)</span> "isola" l'uscita dell'op-amp dalla capacità <span class="arithmatex">\(C_{232}\)</span> e da quella dell'ADC, garantendo la stabilità.</p>
</li>
<li>
<p><strong>C232 (Serbatoio di Carica):</strong> Questo condensatore, posto proprio vicino al pin dell'ADC, agisce come un "mini-serbatoio" di carica. Quando l'interruttore S/H dell'ADC si chiude, la maggior parte della carica istantanea necessaria a <span class="arithmatex">\(C_H\)</span> proviene da C232 (che è fisicamente vicino), non dall'op-amp (che è "più lontano", elettricamente parlando, attraverso R311). Questo minimizza il <em>voltage droop</em> (calo di tensione) istantaneo sul pin dell'ADC, permettendo un campionamento molto più accurato.</p>
</li>
</ol>
<p>Il segnale finale, <strong><code>ADC1_IN</code></strong>, è ora pulito, filtrato, protetto, bufferizzato e pronto per essere convertito in un numero digitale. L'intero circuito è duplicato per gestire un secondo canale analogico.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>